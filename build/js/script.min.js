"use strict";function login(e){var data={login:$("#login-email").val(),password:$("#login-password").val()};console.log(data)}function register(){var data={login:$("#reg-login").val(),email:$("#reg-email").val(),password:$("#reg-password").val(),confPassword:$("#reg-confPassword").val()};console.log(data)}$(document).ready(function(){$(".link--dropdown").click(function(){$(".link-categories").slideToggle()}),$("#login").click(function(){$("#modal-login").toggle()}),$("#register").click(function(){$("#modal-login").toggle(),$("#modal-register").toggle()}),$("#haveacc").click(function(){$("#modal-login").toggle(),$("#modal-register").toggle()}),$("#close1").click(function(){$("#modal-login").toggle()}),$("#close2").click(function(){$("#modal-register").toggle()})}),axios.get("http://hackathon.xx.org.ua/api/comments").then(res=>{res.data.map(item=>{$("#comments").append(`\n        <div class="comment">\n          <div class="comment__wrapper">\n            <div class="comment__desc">\n              <div class="comment__desc-avatar"></div>\n              <div class="comment__desc-header">${item.user.name}</div>\n            </div>\n            <p class="comment__content">${item.comment}</p>\n          </div>\n        </div>\n      `)})}).catch(err=>console.log(err)),axios.get("http://hackathon.xx.org.ua/api/categories").then(res=>{res.data.map(item=>{$(".link-categories").append(`\n        <li><a href="#">${item.name}</a></li>\n      `)})}).catch(err=>console.log(err));let comments=document.querySelectorAll(".comment");for(let i=0;i<comments.length;i++){let elem=comments[i],parentEl=elem.parentNode;if(parentEl.classList.contains("comment")){let wrapperEl=elem.firstElementChild;wrapperEl.style.marginTop="0px",wrapperEl.style.marginLeft="40px",parentEl.parentNode.classList.contains("comment")&&(wrapperEl.style.marginLeft="80px")}}!function(){var pictureDataUrl,addNewsTab=document.querySelector(".add-article-tab"),newsListTab=document.querySelector(".news-list-tab"),newsTable=document.querySelector(".news-table"),addNews=document.querySelector(".add-news-button"),backToNews=document.querySelector(".back-to-news"),submitArticleButton=document.querySelector(".submit-article"),categoreisSelect=document.querySelector(".categories-select"),addCategoryButton=document.querySelector(".add-category"),newCategoryName=document.querySelector(".new-category-name"),addArticleButton=document.querySelector(".submit-article"),editArticleButton=document.querySelector(".edit-article"),articleName=document.querySelector(".atricle-name"),articlePicture=document.querySelector(".article-picture"),articleContent=document.querySelector(".article-content"),articleImage=document.querySelector(".article-image");addNews.addEventListener("click",function(e){e.preventDefault(),articleName.value="",articleContent.value="",categoreisSelect.selectedIndex=0,addNewsTab.classList.toggle("hidden"),newsListTab.classList.toggle("hidden"),editArticleButton.classList.add("hidden"),editArticleButton.disabled=!0}),backToNews.addEventListener("click",function(e){e.preventDefault(),addNewsTab.classList.toggle("hidden"),newsListTab.classList.toggle("hidden"),editArticleButton.classList.remove("hidden"),editArticleButton.disabled=!1,submitArticleButton.classList.remove("hidden"),submitArticleButton.disabled=!1}),newsTable.addEventListener("click",function(e){if(e.target.classList.contains("delete")&&(console.log("delete",e.target.getAttribute("data-id")),e.target.parentElement.parentElement.parentElement.removeChild(e.target.parentElement.parentElement)),e.target.classList.contains("edit")&&(console.log("edit",e.target.getAttribute("data-id")),e.preventDefault(),addNewsTab.classList.toggle("hidden"),newsListTab.classList.toggle("hidden"),axios.get("http://hackathon.xx.org.ua/api/news/"+e.target.getAttribute("data-url")).then(function(response){editArticleButton.setAttribute("data-url",e.target.getAttribute("data-url")),console.log(response.data[0]),articleName.value=response.data[0].name,articleContent.value=response.data[0].content,categoreisSelect.selectedIndex=response.data[0].category_id-1}).catch(function(error){console.log(error)}),submitArticleButton.classList.add("hidden"),submitArticleButton.disabled=!0),e.target.classList.contains("is-active")&&console.log("is-active",e.target.getAttribute("data-id")),e.target.classList.contains("is-main")){console.log("is-main",e.target.getAttribute("data-id"));var exIsMain=newsTable.querySelector(".is-main-checkbox");if(exIsMain===e.target)return;if(e.target.classList.add("is-main-checkbox"),!exIsMain)return;exIsMain.checked=!1,exIsMain.classList.remove("is-main-checkbox")}}),addCategoryButton.addEventListener("click",function(e){e.preventDefault(),function(categoryName){if(!categoryName)return;axios.post("http://hackathon.xx.org.ua/api/category",{name:categoryName}).then(function(response){}).catch(function(error){console.log(error)})}(newCategoryName.value)}),addArticleButton.addEventListener("click",function(e){var url,data;e.preventDefault(),url=function(text){for(var i in chars)text=text.replace(new RegExp(i,"g"),chars[i]);return text}(articleName.value),data={name:articleName.value,category_id:categoreisSelect.value,content:articleContent.value,image:pictureDataUrl,url},console.log(data),axios.post("http://hackathon.xx.org.ua/api/admin/news/create",data).then(function(response){console.log("post category response: ",response)}).catch(function(error){console.log(error)})}),editArticleButton.addEventListener("click",function(e){var id,data;e.preventDefault(),id=editArticleButton.getAttribute("data-id"),data={id,name:articleName.value,content:articleContent.value,category_id:categoreisSelect.value},axios.put("http://hackathon.xx.org.ua/api/admin/news/update",data).then(function(response){console.log("put category response: ",response)}).catch(function(error){console.log(error)})}),articlePicture.addEventListener("change",function(e){var reader;(reader=new FileReader).onloadend=function(){pictureDataUrl=reader.result,articleImage.src=reader.result},articlePicture.files[0]&&reader.readAsDataURL(articlePicture.files[0])}),function(tableToAppend){var template=document.querySelector(".template"),tr=template.content.querySelector("tr"),id=tr.querySelector(".id"),newName=tr.querySelector(".name"),category=tr.querySelector(".category"),preview=tr.querySelector(".preview"),author=tr.querySelector(".author"),created=tr.querySelector(".created"),edited=tr.querySelector(".edited"),isActive=tr.querySelector(".is-active"),isMain=tr.querySelector(".is-main"),deleteArticle=tr.querySelector(".delete"),editArticle=tr.querySelector(".edit");axios.get("http://hackathon.xx.org.ua/api/news?sort_field=name&sort_type=desc&limit=15").then(function(response){console.log("get response: ",response.data);for(var parsedResponse=response.data,i=0;i<parsedResponse.length;i++){id.textContent=parsedResponse[i].id,newName.textContent=parsedResponse[i].name,newName.href="http://hackathon.xx.org.ua/api/news/"+parsedResponse[i].url,category.textContent=parsedResponse[i].category_id,preview.textContent=parsedResponse[i].preview,author.textContent=parsedResponse[i].user_create_id,created.textContent=parsedResponse[i].created_at,edited.textContent=parsedResponse[i].updated_at,isActive.checked=parsedResponse[i].is_active,isMain.checked=parsedResponse[i].is_main,parsedResponse[i].is_main&&isMain.classList.add("is-main-checkbox"),isMain.setAttribute("data-id",parsedResponse[i].id),isActive.setAttribute("data-id",parsedResponse[i].id),deleteArticle.setAttribute("data-id",parsedResponse[i].id),editArticle.setAttribute("data-url",parsedResponse[i].url);var clone=document.importNode(template.content,!0);tableToAppend.appendChild(clone)}}).catch(function(error){console.log(error)})}(newsTable),axios.get("http://hackathon.xx.org.ua/api/categories").then(function(response){for(var i=0;i<response.data.length;i++){var option=document.createElement("option");option.setAttribute("value",response.data[i].id),option.textContent=response.data[i].name,categoreisSelect.appendChild(option)}}).catch(function(error){console.log(error)});var chars={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"shch","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"YO","Ж":"ZH","З":"Z","И":"I","Й":"Y","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"CH","Ш":"SH","Щ":"SHCH","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"YU","Я":"YA"}}();